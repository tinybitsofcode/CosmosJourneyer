"use strict";(globalThis.webpackChunkcosmos_journeyer=globalThis.webpackChunkcosmos_journeyer||[]).push([["8464"],{18316:function(t,e,r){r.d(e,{B:()=>a});var n=r(61834);class a{static ConvertPanoramaToCubemap(t,e,r,n,a=!1){if(!t)throw"ConvertPanoramaToCubemap: input cannot be null";if(t.length!=e*r*3)throw"ConvertPanoramaToCubemap: input size is wrong";let o=this.CreateCubemapTexture(n,this.FACE_FRONT,t,e,r,a),i=this.CreateCubemapTexture(n,this.FACE_BACK,t,e,r,a),u=this.CreateCubemapTexture(n,this.FACE_LEFT,t,e,r,a),h=this.CreateCubemapTexture(n,this.FACE_RIGHT,t,e,r,a);return{front:o,back:i,left:u,right:h,up:this.CreateCubemapTexture(n,this.FACE_UP,t,e,r,a),down:this.CreateCubemapTexture(n,this.FACE_DOWN,t,e,r,a),size:n,type:1,format:4,gammaSpace:!1}}static CreateCubemapTexture(t,e,r,n,a,o=!1){let i=new Float32Array(new ArrayBuffer(t*t*12)),u=o?Math.max(1,Math.round(n/4/t)):1,h=1/u,l=h*h,f=e[1].subtract(e[0]).scale(h/t),s=e[3].subtract(e[2]).scale(h/t),c=1/t,d=0;for(let o=0;o<t;o++)for(let w=0;w<u;w++){let w=e[0],p=e[2];for(let e=0;e<t;e++)for(let h=0;h<u;h++){let u=p.subtract(w).scale(d).add(w);u.normalize();let h=this.CalcProjectionSpherical(u,r,n,a);i[o*t*3+3*e+0]+=h.r*l,i[o*t*3+3*e+1]+=h.g*l,i[o*t*3+3*e+2]+=h.b*l,w=w.add(f),p=p.add(s)}d+=c*h}return i}static CalcProjectionSpherical(t,e,r,n){let a=Math.atan2(t.z,t.x),o=Math.acos(t.y);for(;a<-Math.PI;)a+=2*Math.PI;for(;a>Math.PI;)a-=2*Math.PI;let i=a/Math.PI,u=o/Math.PI,h=Math.round((i=.5*i+.5)*r);h<0?h=0:h>=r&&(h=r-1);let l=Math.round(u*n);l<0?l=0:l>=n&&(l=n-1);let f=n-l-1,s=e[f*r*3+3*h+0];return{r:s,g:e[f*r*3+3*h+1],b:e[f*r*3+3*h+2]}}}a.FACE_LEFT=[new n.P(-1,-1,-1),new n.P(1,-1,-1),new n.P(-1,1,-1),new n.P(1,1,-1)],a.FACE_RIGHT=[new n.P(1,-1,1),new n.P(-1,-1,1),new n.P(1,1,1),new n.P(-1,1,1)],a.FACE_FRONT=[new n.P(1,-1,-1),new n.P(1,-1,1),new n.P(1,1,-1),new n.P(1,1,1)],a.FACE_BACK=[new n.P(-1,-1,1),new n.P(-1,-1,-1),new n.P(-1,1,1),new n.P(-1,1,-1)],a.FACE_DOWN=[new n.P(1,1,-1),new n.P(1,1,1),new n.P(-1,1,-1),new n.P(-1,1,1)],a.FACE_UP=[new n.P(-1,-1,-1),new n.P(-1,-1,1),new n.P(1,-1,-1),new n.P(1,-1,1)]},32126:function(t,e,r){r.d(e,{Ag:()=>o,M7:()=>c,MC:()=>d,TC:()=>i,WU:()=>s,ch:()=>h,h5:()=>w,o:()=>l,rb:()=>f,vM:()=>u,xo:()=>n});class n{}function a(t,e,r,n,a,i,u,h,l,f,s,c,d,w,p,C,P){let g=t.asArray();g[0]=e,g[1]=r,g[2]=n,g[3]=a,g[4]=i,g[5]=u,g[6]=h,g[7]=l,g[8]=f,g[9]=s,g[10]=c,g[11]=d,g[12]=w,g[13]=p,g[14]=C,g[15]=P,o(t)}function o(t){t.updateFlag=n._UpdateFlagSeed++}function i(t){a(t,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}function u(t,e,r,n){a(n,1,0,0,0,0,1,0,0,0,0,1,0,t,e,r,1)}function h(t,e,r,n){a(n,t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1)}function l(t,e,r,n=0){let a=t.asArray(),o=e.asArray(),i=a[0],u=a[1],h=a[2],f=a[3],s=a[4],c=a[5],d=a[6],w=a[7],p=a[8],C=a[9],P=a[10],g=a[11],A=a[12],m=a[13],b=a[14],y=a[15],F=o[0],T=o[1],M=o[2],_=o[3],x=o[4],v=o[5],B=o[6],E=o[7],D=o[8],R=o[9],H=o[10],I=o[11],U=o[12],O=o[13],S=o[14],z=o[15];r[n]=i*F+u*x+h*D+f*U,r[n+1]=i*T+u*v+h*R+f*O,r[n+2]=i*M+u*B+h*H+f*S,r[n+3]=i*_+u*E+h*I+f*z,r[n+4]=s*F+c*x+d*D+w*U,r[n+5]=s*T+c*v+d*R+w*O,r[n+6]=s*M+c*B+d*H+w*S,r[n+7]=s*_+c*E+d*I+w*z,r[n+8]=p*F+C*x+P*D+g*U,r[n+9]=p*T+C*v+P*R+g*O,r[n+10]=p*M+C*B+P*H+g*S,r[n+11]=p*_+C*E+P*I+g*z,r[n+12]=A*F+m*x+b*D+y*U,r[n+13]=A*T+m*v+b*R+y*O,r[n+14]=A*M+m*B+b*H+y*S,r[n+15]=A*_+m*E+b*I+y*z}function f(t,e,r,n=0){l(t,e,r.asArray(),n),o(r)}function s(t,e){c(t,e.asArray()),o(e)}function c(t,e,r=0){let n=t.asArray();e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],e[r+4]=n[4],e[r+5]=n[5],e[r+6]=n[6],e[r+7]=n[7],e[r+8]=n[8],e[r+9]=n[9],e[r+10]=n[10],e[r+11]=n[11],e[r+12]=n[12],e[r+13]=n[13],e[r+14]=n[14],e[r+15]=n[15]}function d(t,e){let r=w(t,e.asArray());return r&&o(e),r}function w(t,e){let r=t.asArray(),n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],h=r[5],l=r[6],f=r[7],s=r[8],c=r[9],d=r[10],w=r[11],p=r[12],C=r[13],P=r[14],g=r[15],A=d*g-P*w,m=c*g-C*w,b=c*P-C*d,y=s*g-p*w,F=s*P-d*p,T=s*C-p*c,M=+(h*A-l*m+f*b),_=-(u*A-l*y+f*F),x=+(u*m-h*y+f*T),v=-(u*b-h*F+l*T),B=n*M+a*_+o*x+i*v;if(0===B)return!1;let E=1/B,D=l*g-P*f,R=h*g-C*f,H=h*P-C*l,I=u*g-p*f,U=u*P-p*l,O=u*C-p*h,S=l*w-d*f,z=h*w-c*f,k=h*d-c*l,j=u*w-s*f,K=u*d-s*l,L=u*c-s*h;return e[0]=M*E,e[1]=-(a*A-o*m+i*b)*E,e[2]=(a*D-o*R+i*H)*E,e[3]=-(a*S-o*z+i*k)*E,e[4]=_*E,e[5]=(n*A-o*y+i*F)*E,e[6]=-(n*D-o*I+i*U)*E,e[7]=(n*S-o*j+i*K)*E,e[8]=x*E,e[9]=-(n*m-a*y+i*T)*E,e[10]=(n*R-a*I+i*O)*E,e[11]=-(n*z-a*j+i*L)*E,e[12]=v*E,e[13]=(n*b-a*F+o*T)*E,e[14]=-(n*H-a*U+o*O)*E,e[15]=(n*k-a*K+o*L)*E,!0}n._UpdateFlagSeed=0},56672:function(t,e,r){r.d(e,{dK:()=>i,ls:()=>h,od:()=>u,sw:()=>f});var n=r(18316);function a(t,e,r,n,a,o){if(a>0){var i;a=(i=a-136)>1023?898846567431158e293*Math.pow(2,i-1023):i<-1074?5e-324*1*Math.pow(2,i+1074):+Math.pow(2,i),t[o+0]=e*a,t[o+1]=r*a,t[o+2]=n*a}else t[o+0]=0,t[o+1]=0,t[o+2]=0}function o(t,e){let r="",n="";for(let a=e;a<t.length-e&&"\n"!=(n=String.fromCharCode(t[a]));a++)r+=n;return r}function i(t){let e=0,r=0,n=o(t,0);if("#"!=n[0]||"?"!=n[1])throw"Bad HDR Format.";let a=!1,i=!1,u=0;do u+=n.length+1,"FORMAT=32-bit_rle_rgbe"==(n=o(t,u))?i=!0:0==n.length&&(a=!0);while(!a);if(!i)throw"HDR Bad header format, unsupported FORMAT";u+=n.length+1,n=o(t,u);let h=/^-Y (.*) \+X (.*)$/g.exec(n);if(!h||h.length<3)throw"HDR Bad header format, no size";if(r=parseInt(h[2]),e=parseInt(h[1]),r<8||r>32767)throw"HDR Bad header format, unsupported size";return{height:e,width:r,dataPosition:u+=n.length+1}}function u(t,e,r=!1){let a=new Uint8Array(t),o=i(a),h=l(a,o);return n.B.ConvertPanoramaToCubemap(h,o.width,o.height,e,r)}function h(t,e){return l(t,e)}function l(t,e){let r,n,o,i,u,h=e.height,l=e.width,f=e.dataPosition,s=0,c=0,d=0,w=new Uint8Array(new ArrayBuffer(4*l)),p=new Float32Array(new ArrayBuffer(e.width*e.height*12));for(;h>0;){if(r=t[f++],n=t[f++],o=t[f++],i=t[f++],2!=r||2!=n||128&o||e.width<8||e.width>32767)return function(t,e){let r,n,o,i=e.height,u=e.width,h=e.dataPosition,l=new Float32Array(new ArrayBuffer(e.width*e.height*12));for(;i>0;){for(o=0;o<e.width;o++)r=t[h++],n=t[h++],a(l,r,n,t[h++],t[h++],(e.height-i)*u*3+3*o);i--}return l}(t,e);if((o<<8|i)!=l)throw"HDR Bad header format, wrong scan line width";for(d=0,s=0;d<4;d++)for(c=(d+1)*l;s<c;)if(r=t[f++],n=t[f++],r>128){if(0==(u=r-128)||u>c-s)throw"HDR Bad Format, bad scanline data (run)";for(;u-- >0;)w[s++]=n}else{if(0==(u=r)||u>c-s)throw"HDR Bad Format, bad scanline data (non-run)";if(w[s++]=n,--u>0)for(let e=0;e<u;e++)w[s++]=t[f++]}for(d=0;d<l;d++)r=w[d],n=w[d+l],a(p,r,n,o=w[d+2*l],i=w[d+3*l],(e.height-h)*l*3+3*d);h--}return p}let f={RGBE_ReadHeader:i,GetCubeMapTextureData:u,RGBE_ReadPixels:h}},84865:function(t,e,r){function n(t,e){let r=[];for(let n=0;n<t;++n)r.push(e());return r}function a(t,e){return n(t,e)}r.d(e,{$G:()=>n,Mf:()=>i,rP:()=>a});let o=["push","splice","pop","shift","unshift"];function i(t,e){let r=o.map(r=>(function(t,e,r){let n=t[e];if("function"!=typeof n)return null;let a=function(){let n=t.length,o=a.previous.apply(t,arguments);return r(e,n),o};return n.next=a,a.previous=n,t[e]=a,()=>{let r=a.previous;if(!r)return;let n=a.next;n?(r.next=n,n.previous=r):(r.next=void 0,t[e]=r),a.next=void 0,a.previous=void 0}})(t,r,e));return()=>{for(let t of r)t?.()}}},86502:function(t,e,r){r.r(e),r.d(e,{_HDRTextureLoader:()=>a});var n=r(56672);class a{constructor(){this.supportCascades=!1}loadCubeData(){throw".hdr not supported in Cube."}loadData(t,e,r){let a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=(0,n.dK)(a),i=(0,n.ls)(a,o),u=o.width*o.height,h=new Float32Array(4*u);for(let t=0;t<u;t+=1)h[4*t]=i[3*t],h[4*t+1]=i[3*t+1],h[4*t+2]=i[3*t+2],h[4*t+3]=1;r(o.width,o.height,e.generateMipMaps,!1,()=>{let t=e.getEngine();e.type=1,e.format=5,e._gammaSpace=!1,t._uploadDataToTextureDirectly(e,h)})}}}}]);