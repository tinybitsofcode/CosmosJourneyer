"use strict";(globalThis.webpackChunkcosmos_journeyer=globalThis.webpackChunkcosmos_journeyer||[]).push([["25"],{37998:function(e,t,r){var a=r(9532),l=r(9628),o=r(85753),n=r(15426),f=r(64268),s=r(45620);f.a.prototype._partialLoadFile=function(e,t,r,a,l=null){this._loadFile(e,e=>{r[t]=e,r._internalCount++,6===r._internalCount&&a(r)},void 0,void 0,!0,(e,t)=>{l&&e&&l(e.status+" "+e.statusText,t)})},f.a.prototype._cascadeLoadFiles=function(e,t,r,a=null){let l=[];l._internalCount=0;for(let e=0;e<6;e++)this._partialLoadFile(r[e],e,l,t,a)},f.a.prototype._cascadeLoadImgs=function(e,t,r,a,l=null,o){let n=[];n._internalCount=0;for(let f=0;f<6;f++)this._partialLoadImg(a[f],f,n,e,t,r,l,o)},f.a.prototype._partialLoadImg=function(e,t,r,a,l,f,s=null,i){let u=(0,n.f)();(0,o.r6)(e,e=>{r[t]=e,r._internalCount++,a&&a.removePendingData(u),6===r._internalCount&&f&&f(l,r)},(e,t)=>{a&&a.removePendingData(u),s&&s(e,t)},a?a.offlineProvider:null,i),a&&a.addPendingData(u)},f.a.prototype.createCubeTextureBase=function(e,t,r,o,n=null,f=null,i,u=null,c=!1,A=0,y=0,p=null,d=null,h=null,_=!1,b=null){let C=p||new a.l(this,7);C.isCube=!0,C.url=e,C.generateMipMaps=!o,C._lodGenerationScale=A,C._lodGenerationOffset=y,C._useSRGBBuffer=!!_&&this._caps.supportSRGBBuffers&&(this.version>1||this.isWebGPU||!!o),C!==p&&(C.label=e.substring(0,60)),this._doNotHandleContextLost||(C._extension=u,C._files=r,C._buffer=b);let B=e;this._transformTextureUrl&&!p&&(e=this._transformTextureUrl(e));let G=e.split("?")[0],m=G.lastIndexOf("."),F=u||(m>-1?G.substring(m).toLowerCase():""),x=(0,s.qr)(F),w=(a,s)=>{e===B?f&&a&&f(a.status+" "+a.statusText,s):(l.Y.Warn(`Failed to load ${e}, falling back to the ${B}`),this.createCubeTextureBase(B,t,r,!!o,n,f,i,u,c,A,y,C,d,h,_,b))};if(x)x.then(a=>{let o=e=>{d&&d(C,e),a.loadCubeData(e,C,c,n,f)};b?o(b):r&&6===r.length?a.supportCascades?this._cascadeLoadFiles(t,e=>o(e.map(e=>new Uint8Array(e))),r,f):f?f("Textures type does not support cascades."):l.Y.Warn("Texture loader does not support cascades."):this._loadFile(e,e=>o(new Uint8Array(e)),void 0,void 0,!0,w)});else{if(!r||0===r.length)throw Error("Cannot load cubemap because files were not defined, or the correct loader was not found.");this._cascadeLoadImgs(t,C,(e,t)=>{h&&h(e,t)},r,f)}return this._internalTexturesCache.push(C),C}},88041:function(e,t,r){r.d(t,{DDSTools:()=>A});var a=r(87338),l=r(9628),o=r(38122),n=r(73957);function f(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}r(37998);let s=f("DXT1"),i=f("DXT3"),u=f("DXT5"),c=f("DX10");class A{static GetDDSInfo(e){let t=new Int32Array(e.buffer,e.byteOffset,31),r=new Int32Array(e.buffer,e.byteOffset,35),a=1;131072&t[2]&&(a=Math.max(1,t[7]));let l=t[21],o=l===c?r[32]:0,n=0;switch(l){case 113:n=2;break;case 116:n=1;break;case c:if(10===o){n=2;break}2===o&&(n=1)}return{width:t[4],height:t[3],mipmapCount:a,isFourCC:(4&t[20])==4,isRGB:(64&t[20])==64,isLuminance:(131072&t[20])==131072,isCube:(512&t[28])==512,isCompressed:l===s||l===i||l===u,dxgiFormat:o,textureType:n}}static _GetHalfFloatAsFloatRGBAArrayBuffer(e,t,r,a,l,o){let f=new Float32Array(a),s=new Uint16Array(l,r),i=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){let a=(t+r*e)*4;f[i]=(0,n.qZ)(s[a]),f[i+1]=(0,n.qZ)(s[a+1]),f[i+2]=(0,n.qZ)(s[a+2]),A.StoreLODInAlphaChannel?f[i+3]=o:f[i+3]=(0,n.qZ)(s[a+3]),i+=4}return f}static _GetHalfFloatRGBAArrayBuffer(e,t,r,a,l,o){if(A.StoreLODInAlphaChannel){let f=new Uint16Array(a),s=new Uint16Array(l,r),i=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){let a=(t+r*e)*4;f[i]=s[a],f[i+1]=s[a+1],f[i+2]=s[a+2],f[i+3]=(0,n.ay)(o),i+=4}return f}return new Uint16Array(l,r,a)}static _GetFloatRGBAArrayBuffer(e,t,r,a,l,o){if(A.StoreLODInAlphaChannel){let n=new Float32Array(a),f=new Float32Array(l,r),s=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){let a=(t+r*e)*4;n[s]=f[a],n[s+1]=f[a+1],n[s+2]=f[a+2],n[s+3]=o,s+=4}return n}return new Float32Array(l,r,a)}static _GetFloatAsHalfFloatRGBAArrayBuffer(e,t,r,a,l,o){let f=new Uint16Array(a),s=new Float32Array(l,r),i=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++)f[i]=(0,n.ay)(s[i]),f[i+1]=(0,n.ay)(s[i+1]),f[i+2]=(0,n.ay)(s[i+2]),A.StoreLODInAlphaChannel?f[i+3]=(0,n.ay)(o):f[i+3]=(0,n.ay)(s[i+3]),i+=4;return f}static _GetFloatAsUIntRGBAArrayBuffer(e,t,r,l,o,n){let f=new Uint8Array(l),s=new Float32Array(o,r),i=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){let l=(t+r*e)*4;f[i]=255*(0,a.Clamp)(s[l]),f[i+1]=255*(0,a.Clamp)(s[l+1]),f[i+2]=255*(0,a.Clamp)(s[l+2]),A.StoreLODInAlphaChannel?f[i+3]=n:f[i+3]=255*(0,a.Clamp)(s[l+3]),i+=4}return f}static _GetHalfFloatAsUIntRGBAArrayBuffer(e,t,r,l,o,f){let s=new Uint8Array(l),i=new Uint16Array(o,r),u=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){let l=(t+r*e)*4;s[u]=255*(0,a.Clamp)((0,n.qZ)(i[l])),s[u+1]=255*(0,a.Clamp)((0,n.qZ)(i[l+1])),s[u+2]=255*(0,a.Clamp)((0,n.qZ)(i[l+2])),A.StoreLODInAlphaChannel?s[u+3]=f:s[u+3]=255*(0,a.Clamp)((0,n.qZ)(i[l+3])),u+=4}return s}static _GetRGBAArrayBuffer(e,t,r,a,l,o,n,f,s){let i=new Uint8Array(a),u=new Uint8Array(l,r),c=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){let a=(t+r*e)*4;i[c]=u[a+o],i[c+1]=u[a+n],i[c+2]=u[a+f],i[c+3]=u[a+s],c+=4}return i}static _ExtractLongWordOrder(e){return 0===e||255===e||-0x1000000===e?0:1+A._ExtractLongWordOrder(e>>8)}static _GetRGBArrayBuffer(e,t,r,a,l,o,n,f){let s=new Uint8Array(a),i=new Uint8Array(l,r),u=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){let a=(t+r*e)*3;s[u]=i[a+o],s[u+1]=i[a+n],s[u+2]=i[a+f],u+=3}return s}static _GetLuminanceArrayBuffer(e,t,r,a,l){let o=new Uint8Array(a),n=new Uint8Array(l,r),f=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){let a=t+r*e;o[f]=n[a],f++}return o}static UploadDDSLevels(e,t,r,a,n,f,y=-1,p,d=!0){let h,_,b,C=null;a.sphericalPolynomial&&(C=[]);let B=!!e.getCaps().s3tc;t.generateMipMaps=n;let G=new Int32Array(r.buffer,r.byteOffset,31),m,F,x,w=0,g,D=0,L=1;if(0x20534444!==G[0]){l.Y.Error("Invalid magic number in DDS header");return}if(!a.isFourCC&&!a.isRGB&&!a.isLuminance){l.Y.Error("Unsupported format, must contain a FourCC, RGB or LUMINANCE code");return}if(a.isCompressed&&!B){l.Y.Error("Compressed textures are not supported on this platform.");return}let R=G[22];g=G[1]+4;let U=!1;if(a.isFourCC)switch(m=G[21]){case s:L=8,D=33777;break;case i:L=16,D=33778;break;case u:L=16,D=33779;break;case 113:U=!0,R=64;break;case 116:U=!0,R=128;break;case c:{g+=20;let e=!1;switch(a.dxgiFormat){case 10:U=!0,R=64,e=!0;break;case 2:U=!0,R=128,e=!0;break;case 88:a.isRGB=!0,a.isFourCC=!1,R=32,e=!0}if(e)break}default:l.Y.Error(["Unsupported FourCC code:",String.fromCharCode(255&m,m>>8&255,m>>16&255,m>>24&255)]);return}let O=A._ExtractLongWordOrder(G[23]),T=A._ExtractLongWordOrder(G[24]),I=A._ExtractLongWordOrder(G[25]),k=A._ExtractLongWordOrder(G[26]);U&&(D=e._getRGBABufferInternalSizedFormat(a.textureType)),_=1,131072&G[2]&&!1!==n&&(_=Math.max(1,G[7]));let S=p||0,H=e.getCaps();for(let l=S;l<f;l++){for(b=0,F=G[4],x=G[3];b<_;++b){if(-1===y||y===b){let o=-1===y?b:0;if(!a.isCompressed&&a.isFourCC){t.format=5,w=F*x*4;let a=null;if(e._badOS||e._badDesktopOS||!H.textureHalfFloat&&!H.textureFloat)128===R?(a=A._GetFloatAsUIntRGBAArrayBuffer(F,x,r.byteOffset+g,w,r.buffer,o),C&&0==o&&C.push(A._GetFloatRGBAArrayBuffer(F,x,r.byteOffset+g,w,r.buffer,o))):64===R&&(a=A._GetHalfFloatAsUIntRGBAArrayBuffer(F,x,r.byteOffset+g,w,r.buffer,o),C&&0==o&&C.push(A._GetHalfFloatAsFloatRGBAArrayBuffer(F,x,r.byteOffset+g,w,r.buffer,o))),t.type=0;else{let e;let l=H.textureFloat&&(d&&H.textureFloatLinearFiltering||!d),n=H.textureHalfFloat&&(d&&H.textureHalfFloatLinearFiltering||!d),f=(128===R||64===R&&!n)&&l?1:(64===R||128===R&&!l)&&n?2:0,s=null;if(128===R)switch(f){case 1:e=A._GetFloatRGBAArrayBuffer,s=null;break;case 2:e=A._GetFloatAsHalfFloatRGBAArrayBuffer,s=A._GetFloatRGBAArrayBuffer;break;case 0:e=A._GetFloatAsUIntRGBAArrayBuffer,s=A._GetFloatRGBAArrayBuffer}else switch(f){case 1:e=A._GetHalfFloatAsFloatRGBAArrayBuffer,s=null;break;case 2:e=A._GetHalfFloatRGBAArrayBuffer,s=A._GetHalfFloatAsFloatRGBAArrayBuffer;break;case 0:e=A._GetHalfFloatAsUIntRGBAArrayBuffer,s=A._GetHalfFloatAsFloatRGBAArrayBuffer}t.type=f,a=e(F,x,r.byteOffset+g,w,r.buffer,o),C&&0==o&&C.push(s?s(F,x,r.byteOffset+g,w,r.buffer,o):a)}a&&e._uploadDataToTextureDirectly(t,a,l,o)}else if(a.isRGB)t.type=0,24===R?(t.format=4,w=F*x*3,h=A._GetRGBArrayBuffer(F,x,r.byteOffset+g,w,r.buffer,O,T,I)):(t.format=5,w=F*x*4,h=A._GetRGBAArrayBuffer(F,x,r.byteOffset+g,w,r.buffer,O,T,I,k)),e._uploadDataToTextureDirectly(t,h,l,o);else if(a.isLuminance){let a=e._getUnpackAlignement(),n=F;w=Math.floor((F+a-1)/a)*a*(x-1)+n,h=A._GetLuminanceArrayBuffer(F,x,r.byteOffset+g,w,r.buffer),t.format=1,t.type=0,e._uploadDataToTextureDirectly(t,h,l,o)}else w=Math.max(4,F)/4*Math.max(4,x)/4*L,h=new Uint8Array(r.buffer,r.byteOffset+g,w),t.type=0,e._uploadCompressedDataToTextureDirectly(t,D,F,x,h,l,o)}g+=R?F*x*(R/8):w,F*=.5,x*=.5,F=Math.max(1,F),x=Math.max(1,x)}if(void 0!==p)break}C&&C.length>0?a.sphericalPolynomial=o.$.ConvertCubeMapToSphericalPolynomial({size:G[4],right:C[0],left:C[1],up:C[2],down:C[3],front:C[4],back:C[5],format:5,type:1,gammaSpace:!1}):a.sphericalPolynomial=void 0}}A.StoreLODInAlphaChannel=!1}}]);