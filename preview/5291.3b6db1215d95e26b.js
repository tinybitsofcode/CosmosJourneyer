/*
 *  This file is part of Cosmos Journeyer
 *
 *  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

"use strict";(globalThis.webpackChunkcosmos_journeyer=globalThis.webpackChunkcosmos_journeyer||[]).push([["5291"],{11740:function(e,t,r){r.d(t,{V:()=>c});var i=r(69254),s=r(88609),n=r(85791),a=r(61834),u=r(65098),o=r(53986);r(21381);var l=r(81965),h=r(90131);class c extends l.g{set hasAlpha(e){this._hasAlpha!==e&&(this._hasAlpha=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,e=>e.hasTexture(this)))}get hasAlpha(){return this._hasAlpha}set getAlphaFromRGB(e){this._getAlphaFromRGB!==e&&(this._getAlphaFromRGB=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,e=>e.hasTexture(this)))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(e){this._coordinatesIndex!==e&&(this._coordinatesIndex=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,e=>e.hasTexture(this)))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(e){this._coordinatesMode!==e&&(this._coordinatesMode=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,e=>e.hasTexture(this)))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(e){this._wrapU=e}get wrapV(){return this._wrapV}set wrapV(e){this._wrapV=e}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(e){this._texture?this._texture.isCube=e:this._isCube=e}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(e){this._texture&&(this._texture.is3D=e)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(e){this._texture&&(this._texture.is2DArray=e)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(e){if(this._texture){if(this._texture._gammaSpace===e)return;this._texture._gammaSpace=e}else{if(this._gammaSpace===e)return;this._gammaSpace=e}this.getScene()?.markAllMaterialsAsDirty(1,e=>e.hasTexture(this))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(e){e!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=e),this.getScene()?.markAllMaterialsAsDirty(1,e=>e.hasTexture(this)))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(e){this._texture&&(this._texture._lodGenerationOffset=e)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(e){this._texture&&(this._texture._lodGenerationScale=e)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(e){this._texture&&(this._texture._linearSpecularLOD=e)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(e){this._texture&&(this._texture._irradianceTexture=e)}get uid(){return this._uid||(this._uid=(0,o.f)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(e,t=null){super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=c.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.onDisposeObservable=new n.y$,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,e?c._IsScene(e)?this._scene=e:this._engine=e:this._scene=u.l.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=t,this._uid=null}getScene(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return a.y3.IdentityReadOnly}getReflectionTextureMatrix(){return a.y3.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(e){}get canRescale(){return!1}_getFromCache(e,t,r,i,s,n){let a=this._getEngine();if(!a)return null;let u=a._getUseSRGBBuffer(!!s,t),o=a.getLoadedTexturesCache();for(let a=0;a<o.length;a++){let l=o[a];if((void 0===s||u===l._useSRGBBuffer)&&(void 0===i||i===l.invertY)&&l.url===e&&!t===l.generateMipMaps&&(!r||r===l.samplingMode)&&(void 0===n||n===l.isCube))return l.incrementReferences(),l}return null}_rebuild(e=!1){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){let e=this.getScene();e&&e.markAllMaterialsAsDirty(1)}readPixels(e=0,t=0,r=null,i=!0,s=!1,n=0,a=0,u=Number.MAX_VALUE,o=Number.MAX_VALUE){if(!this._texture)return null;let l=this._getEngine();if(!l)return null;let h=this.getSize(),c=h.width,_=h.height;0!==t&&(c/=Math.pow(2,t),_/=Math.pow(2,t),c=Math.round(c),_=Math.round(_)),u=Math.min(c,u),o=Math.min(_,o);try{if(this._texture.isCube)return l._readTexturePixels(this._texture,u,o,e,t,r,i,s,n,a);return l._readTexturePixels(this._texture,u,o,-1,t,r,i,s,n,a)}catch(e){return null}}_readPixelsSync(e=0,t=0,r=null,i=!0,s=!1){if(!this._texture)return null;let n=this.getSize(),a=n.width,u=n.height,o=this._getEngine();if(!o)return null;0!=t&&(a/=Math.pow(2,t),u/=Math.pow(2,t),a=Math.round(a),u=Math.round(u));try{if(this._texture.isCube)return o._readTexturePixelsSync(this._texture,a,u,e,t,r,i,s);return o._readTexturePixelsSync(this._texture,a,u,-1,t,r,i,s)}catch(e){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);let e=this._scene.textures.indexOf(this);if(e>=0&&this._scene.textures.splice(e,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){let e=this._parentContainer.textures.indexOf(this);e>-1&&this._parentContainer.textures.splice(e,1),this._parentContainer=null}}this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.metadata=null,super.dispose()}serialize(e=!1){if(!this.name&&!e)return null;let t=h.p.Serialize(this);return h.p.AppendSerializedAnimations(this,t),t}static WhenAllReady(e,t){let r=e.length;if(0===r)return void t();for(let i=0;i<e.length;i++){let s=e[i];if(s.isReady())0==--r&&t();else{let e=s.onLoadObservable;e?e.addOnce(()=>{0==--r&&t()}):0==--r&&t()}}}static _IsScene(e){return"Scene"===e.getClassName()}}c.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,i.gn)([(0,s.qC)()],c.prototype,"uniqueId",void 0),(0,i.gn)([(0,s.qC)()],c.prototype,"name",void 0),(0,i.gn)([(0,s.qC)()],c.prototype,"displayName",void 0),(0,i.gn)([(0,s.qC)()],c.prototype,"metadata",void 0),(0,i.gn)([(0,s.qC)("hasAlpha")],c.prototype,"_hasAlpha",void 0),(0,i.gn)([(0,s.qC)("getAlphaFromRGB")],c.prototype,"_getAlphaFromRGB",void 0),(0,i.gn)([(0,s.qC)()],c.prototype,"level",void 0),(0,i.gn)([(0,s.qC)("coordinatesIndex")],c.prototype,"_coordinatesIndex",void 0),(0,i.gn)([(0,s.qC)()],c.prototype,"optimizeUVAllocation",void 0),(0,i.gn)([(0,s.qC)("coordinatesMode")],c.prototype,"_coordinatesMode",void 0),(0,i.gn)([(0,s.qC)()],c.prototype,"wrapU",null),(0,i.gn)([(0,s.qC)()],c.prototype,"wrapV",null),(0,i.gn)([(0,s.qC)()],c.prototype,"wrapR",void 0),(0,i.gn)([(0,s.qC)()],c.prototype,"anisotropicFilteringLevel",void 0),(0,i.gn)([(0,s.qC)()],c.prototype,"isCube",null),(0,i.gn)([(0,s.qC)()],c.prototype,"is3D",null),(0,i.gn)([(0,s.qC)()],c.prototype,"is2DArray",null),(0,i.gn)([(0,s.qC)()],c.prototype,"gammaSpace",null),(0,i.gn)([(0,s.qC)()],c.prototype,"invertZ",void 0),(0,i.gn)([(0,s.qC)()],c.prototype,"lodLevelInAlpha",void 0),(0,i.gn)([(0,s.qC)()],c.prototype,"lodGenerationOffset",null),(0,i.gn)([(0,s.qC)()],c.prototype,"lodGenerationScale",null),(0,i.gn)([(0,s.qC)()],c.prototype,"linearSpecularLOD",null),(0,i.gn)([(0,s.oU)()],c.prototype,"irradianceTexture",null),(0,i.gn)([(0,s.qC)()],c.prototype,"isRenderTarget",void 0)},32126:function(e,t,r){r.d(t,{Ag:()=>n,M7:()=>_,MC:()=>d,TC:()=>a,WU:()=>c,ch:()=>o,h5:()=>g,o:()=>l,rb:()=>h,vM:()=>u,xo:()=>i});class i{}function s(e,t,r,i,s,a,u,o,l,h,c,_,d,g,p,x,f){let m=e.asArray();m[0]=t,m[1]=r,m[2]=i,m[3]=s,m[4]=a,m[5]=u,m[6]=o,m[7]=l,m[8]=h,m[9]=c,m[10]=_,m[11]=d,m[12]=g,m[13]=p,m[14]=x,m[15]=f,n(e)}function n(e){e.updateFlag=i._UpdateFlagSeed++}function a(e){s(e,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}function u(e,t,r,i){s(i,1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1)}function o(e,t,r,i){s(i,e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1)}function l(e,t,r,i=0){let s=e.asArray(),n=t.asArray(),a=s[0],u=s[1],o=s[2],h=s[3],c=s[4],_=s[5],d=s[6],g=s[7],p=s[8],x=s[9],f=s[10],m=s[11],y=s[12],T=s[13],A=s[14],v=s[15],S=n[0],b=n[1],C=n[2],w=n[3],D=n[4],M=n[5],R=n[6],I=n[7],O=n[8],q=n[9],P=n[10],F=n[11],L=n[12],z=n[13],B=n[14],G=n[15];r[i]=a*S+u*D+o*O+h*L,r[i+1]=a*b+u*M+o*q+h*z,r[i+2]=a*C+u*R+o*P+h*B,r[i+3]=a*w+u*I+o*F+h*G,r[i+4]=c*S+_*D+d*O+g*L,r[i+5]=c*b+_*M+d*q+g*z,r[i+6]=c*C+_*R+d*P+g*B,r[i+7]=c*w+_*I+d*F+g*G,r[i+8]=p*S+x*D+f*O+m*L,r[i+9]=p*b+x*M+f*q+m*z,r[i+10]=p*C+x*R+f*P+m*B,r[i+11]=p*w+x*I+f*F+m*G,r[i+12]=y*S+T*D+A*O+v*L,r[i+13]=y*b+T*M+A*q+v*z,r[i+14]=y*C+T*R+A*P+v*B,r[i+15]=y*w+T*I+A*F+v*G}function h(e,t,r,i=0){l(e,t,r.asArray(),i),n(r)}function c(e,t){_(e,t.asArray()),n(t)}function _(e,t,r=0){let i=e.asArray();t[r]=i[0],t[r+1]=i[1],t[r+2]=i[2],t[r+3]=i[3],t[r+4]=i[4],t[r+5]=i[5],t[r+6]=i[6],t[r+7]=i[7],t[r+8]=i[8],t[r+9]=i[9],t[r+10]=i[10],t[r+11]=i[11],t[r+12]=i[12],t[r+13]=i[13],t[r+14]=i[14],t[r+15]=i[15]}function d(e,t){let r=g(e,t.asArray());return r&&n(t),r}function g(e,t){let r=e.asArray(),i=r[0],s=r[1],n=r[2],a=r[3],u=r[4],o=r[5],l=r[6],h=r[7],c=r[8],_=r[9],d=r[10],g=r[11],p=r[12],x=r[13],f=r[14],m=r[15],y=d*m-f*g,T=_*m-x*g,A=_*f-x*d,v=c*m-p*g,S=c*f-d*p,b=c*x-p*_,C=+(o*y-l*T+h*A),w=-(u*y-l*v+h*S),D=+(u*T-o*v+h*b),M=-(u*A-o*S+l*b),R=i*C+s*w+n*D+a*M;if(0===R)return!1;let I=1/R,O=l*m-f*h,q=o*m-x*h,P=o*f-x*l,F=u*m-p*h,L=u*f-p*l,z=u*x-p*o,B=l*g-d*h,G=o*g-_*h,k=o*d-_*l,E=u*g-c*h,U=u*d-c*l,V=u*_-c*o;return t[0]=C*I,t[1]=-(s*y-n*T+a*A)*I,t[2]=(s*O-n*q+a*P)*I,t[3]=-(s*B-n*G+a*k)*I,t[4]=w*I,t[5]=(i*y-n*v+a*S)*I,t[6]=-(i*O-n*F+a*L)*I,t[7]=(i*B-n*E+a*U)*I,t[8]=D*I,t[9]=-(i*T-s*v+a*b)*I,t[10]=(i*q-s*F+a*z)*I,t[11]=-(i*G-s*E+a*V)*I,t[12]=M*I,t[13]=(i*A-s*S+n*b)*I,t[14]=-(i*P-s*L+n*z)*I,t[15]=(i*k-s*U+n*V)*I,!0}i._UpdateFlagSeed=0},44968:function(e,t,r){r.d(t,{q:()=>i});class i{static Eval(e,t){return"true"===(e=e.match(/\([^()]*\)/g)?e.replace(/\([^()]*\)/g,e=>(e=e.slice(1,e.length-1),i._HandleParenthesisContent(e,t))):i._HandleParenthesisContent(e,t))||"false"!==e&&i.Eval(e,t)}static _HandleParenthesisContent(e,t){let r;t=t||(e=>"true"===e);let s=e.split("||");for(let e in s)if(Object.prototype.hasOwnProperty.call(s,e)){let n=i._SimplifyNegation(s[e].trim()),a=n.split("&&");if(a.length>1)for(let e=0;e<a.length;++e){let s=i._SimplifyNegation(a[e].trim());if(!(r="true"!==s&&"false"!==s?"!"===s[0]?!t(s.substring(1)):t(s):"true"===s)){n="false";break}}if(r||"true"===n){r=!0;break}r="true"!==n&&"false"!==n?"!"===n[0]?!t(n.substring(1)):t(n):"true"===n}return r?"true":"false"}static _SimplifyNegation(e){return"!true"===(e=(e=e.replace(/^[\s!]+/,e=>(e=e.replace(/[\s]/g,()=>"")).length%2?"!":"")).trim())?e="false":"!false"===e&&(e="true"),e}}},5902:function(e,t,r){r.d(t,{Qt:()=>s,VJ:()=>i,eP:()=>n});let i=!1;function s(e){i=e}let n={get UseOpenGLOrientationForUV(){return i},set UseOpenGLOrientationForUV(value){i=value}}},81405:function(e,t,r){r.d(t,{$:()=>s});var i=r(44968);class s{static EnableFor(e){e._tags=e._tags||{},e.hasTags=()=>s.HasTags(e),e.addTags=t=>s.AddTagsTo(e,t),e.removeTags=t=>s.RemoveTagsFrom(e,t),e.matchesTagsQuery=t=>s.MatchesQuery(e,t)}static DisableFor(e){delete e._tags,delete e.hasTags,delete e.addTags,delete e.removeTags,delete e.matchesTagsQuery}static HasTags(e){if(!e._tags)return!1;let t=e._tags;for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!0;return!1}static GetTags(e,t=!0){if(!e._tags)return null;if(!t)return e._tags;{let t=[];for(let r in e._tags)Object.prototype.hasOwnProperty.call(e._tags,r)&&!0===e._tags[r]&&t.push(r);return t.join(" ")}}static AddTagsTo(e,t){if(t&&"string"==typeof t)for(let r of t.split(" "))s._AddTagTo(e,r)}static _AddTagTo(e,t){""!==(t=t.trim())&&"true"!==t&&"false"!==t&&(t.match(/[\s]/)||t.match(/^([!]|([|]|[&]){2})/)||(s.EnableFor(e),e._tags[t]=!0))}static RemoveTagsFrom(e,t){if(!s.HasTags(e))return;let r=t.split(" ");for(let t in r)s._RemoveTagFrom(e,r[t])}static _RemoveTagFrom(e,t){delete e._tags[t]}static MatchesQuery(e,t){return void 0===t||(""===t?s.HasTags(e):i.q.Eval(t,t=>s.HasTags(e)&&e._tags[t]))}}},81965:function(e,t,r){r.d(t,{g:()=>s});var i=r(1137);class s{get wrapU(){return this._wrapU}set wrapU(e){this._wrapU=e}get wrapV(){return this._wrapV}set wrapV(e){this._wrapV=e}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(e){this._texture&&(this._texture.isCube=e)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(e){this._texture&&(this._texture.is3D=e)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(e){this._texture&&(this._texture.is2DArray=e)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(e){return e?.shareDepth!==void 0}constructor(e){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=i.$.Zero(),this._cachedBaseSize=i.$.Zero(),this._initialSamplingMode=2,this._texture=s._IsRenderTargetWrapper(e)?e.texture:e,this._texture&&(this._engine=this._texture.getEngine())}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;this._texture._size&&(this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size)}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0),this._cachedBaseSize}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(e){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(e,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}},84865:function(e,t,r){function i(e,t){let r=[];for(let i=0;i<e;++i)r.push(t());return r}function s(e,t){return i(e,t)}r.d(t,{$G:()=>i,Mf:()=>a,rP:()=>s});let n=["push","splice","pop","shift","unshift"];function a(e,t){let r=n.map(r=>(function(e,t,r){let i=e[t];if("function"!=typeof i)return null;let s=function(){let i=e.length,n=s.previous.apply(e,arguments);return r(t,i),n};return i.next=s,s.previous=i,e[t]=s,()=>{let r=s.previous;if(!r)return;let i=s.next;i?(r.next=i,i.previous=r):(r.next=void 0,e[t]=r),s.next=void 0,s.previous=void 0}})(e,r,t));return()=>{for(let e of r)e?.()}}},88609:function(e,t,r){r.d(t,{G6:()=>y,N$:()=>d,QC:()=>h,RR:()=>_,VE:()=>m,XX:()=>g,hd:()=>c,mv:()=>x,n9:()=>o,oQ:()=>f,oU:()=>u,qC:()=>a,qQ:()=>l,rX:()=>p,wz:()=>n});var i=r(49217);function s(e,t){return(r,s)=>{let n=(0,i.x)(r);n[s]||(n[s]={type:e,sourceName:t})}}function n(e,t=null){return function(e,t=null){return(r,i)=>{let s=t||"_"+i;Object.defineProperty(r,i,{get:function(){return this[s]},set:function(t){"function"==typeof this[s]?.equals&&this[s].equals(t)||this[s]!==t&&(this[s]=t,r[e].apply(this))},enumerable:!0,configurable:!0})}}(e,t)}function a(e){return s(0,e)}function u(e){return s(1,e)}function o(e){return s(2,e)}function l(e){return s(3,e)}function h(e){return s(4,e)}function c(e){return s(5,e)}function _(e){return s(6,e)}function d(e){return s(7,e)}function g(e){return s(8,e)}function p(e){return s(9,e)}function x(e){return s(10,e)}function f(e){return s(12,e)}function m(e){return s(11,e)}function y(e,t,r,i){let s=r.value;r.value=(...r)=>{let n=s;if("undefined"!=typeof _native&&_native[t]){let e=_native[t];n=i?(...t)=>i(...t)?e(...t):s(...t):e}return e[t]=n,n(...r)}}y.filter=function(e){return(t,r,i)=>y(t,r,i,e)}},89662:function(e,t,r){function i(e,t,r=!1){let s=t.width,n=t.height;if(e instanceof Float32Array){let t=e.byteLength/e.BYTES_PER_ELEMENT,r=new Uint8Array(t);for(;--t>=0;){let i=e[t];i<0?i=0:i>1&&(i=1),r[t]=255*i}e=r}let a=document.createElement("canvas");a.width=s,a.height=n;let u=a.getContext("2d");if(!u)return null;let o=u.createImageData(s,n);if(o.data.set(e),u.putImageData(o,0,0),r){let e=document.createElement("canvas");e.width=s,e.height=n;let t=e.getContext("2d");return t?(t.translate(0,n),t.scale(1,-1),t.drawImage(a,0,0),e.toDataURL("image/png")):null}return a.toDataURL("image/png")}function s(e,t=0,r=0){let n=e.getInternalTexture();if(!n)return null;let a=e._readPixelsSync(t,r);return a?i(a,e.getSize(),n.invertY):null}async function n(e,t=0,r=0){let s=e.getInternalTexture();if(!s)return null;let a=await e.readPixels(t,r);return a?i(a,e.getSize(),s.invertY):null}r.d(t,{Jj:()=>n,_u:()=>s,r1:()=>a,xj:()=>i});let a={GenerateBase64StringFromPixelData:i,GenerateBase64StringFromTexture:s,GenerateBase64StringFromTextureAsync:n}},90131:function(e,t,r){r.d(t,{p:()=>l});var i=r(53864),s=r(81405),n=r(57423),a=r(61834),u=r(49217);let o=function(e,t,r,i={}){let n=e();s.$&&s.$.HasTags(t)&&s.$.AddTagsTo(n,s.$.GetTags(t,!0));let a=(0,u.D)(n),o={};for(let e in a){let s=a[e],u=t[e],h=s.type;if(null!=u&&("uniqueId"!==e||l.AllowLoadingUniqueId))switch(h){case 0:case 6:case 9:case 11:n[e]=u;break;case 1:i.cloneTexturesOnlyOnce&&o[u.uniqueId]?n[e]=o[u.uniqueId]:(n[e]=r||u.isRenderTarget?u:u.clone(),o[u.uniqueId]=n[e]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:n[e]=r?u:u.clone()}}return n};class l{static AppendSerializedAnimations(e,t){if(e.animations){t.animations=[];for(let r=0;r<e.animations.length;r++){let i=e.animations[r];t.animations.push(i.serialize())}}}static Serialize(e,t){t||(t={}),s.$&&(t.tags=s.$.GetTags(e));let r=(0,u.D)(e);for(let i in r){let s=r[i],n=s.sourceName||i,a=s.type,u=e[i];if(null!=u&&("uniqueId"!==i||l.AllowLoadingUniqueId))switch(a){case 0:t[n]=u;break;case 1:case 3:case 7:case 9:t[n]=u.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:t[n]=u.asArray();break;case 6:case 11:t[n]=u.id}}return t}static ParseProperties(e,t,r,i){i||(i="");let s=(0,u.D)(t);for(let u in s){let o=s[u],h=e[o.sourceName||u],c=o.type;if(null!=h&&("uniqueId"!==u||l.AllowLoadingUniqueId))switch(c){case 0:t[u]=h;break;case 1:r&&(t[u]=l._TextureParser(h,r,i));break;case 2:t[u]=n.Wo.FromArray(h);break;case 3:t[u]=l._FresnelParametersParser(h);break;case 4:t[u]=a.FM.FromArray(h);break;case 5:t[u]=a.P.FromArray(h);break;case 6:r&&(t[u]=r.getLastMeshById(h));break;case 7:t[u]=l._ColorCurvesParser(h);break;case 8:t[u]=n.HE.FromArray(h);break;case 9:t[u]=l._ImageProcessingConfigurationParser(h);break;case 10:t[u]=a._f.FromArray(h);break;case 11:r&&(t[u]=r.getCameraById(h));break;case 12:t[u]=a.y3.FromArray(h)}}}static Parse(e,t,r,i=null){let n=e();return s.$&&s.$.AddTagsTo(n,t.tags),l.ParseProperties(t,n,r,i),n}static Clone(e,t,r={}){return o(e,t,!1,r)}static Instanciate(e,t){return o(e,t,!0)}}l.AllowLoadingUniqueId=!1,l._ImageProcessingConfigurationParser=e=>{throw(0,i.S)("ImageProcessingConfiguration")},l._FresnelParametersParser=e=>{throw(0,i.S)("FresnelParameters")},l._ColorCurvesParser=e=>{throw(0,i.S)("ColorCurves")},l._TextureParser=(e,t,r)=>{throw(0,i.S)("Texture")}}}]);