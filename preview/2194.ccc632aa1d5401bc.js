"use strict";(globalThis.webpackChunkcosmos_journeyer=globalThis.webpackChunkcosmos_journeyer||[]).push([["2194"],{2227:function(e,t,a){a.r(t),a.d(t,{_DDSTextureLoader:()=>i});var o=a(49192),n=a(20333);class i{constructor(){this.supportCascades=!0}loadCubeData(e,t,a,i){let s,l=t.getEngine(),r=!1,u=1e3;if(Array.isArray(e))for(let a=0;a<e.length;a++){let o=e[a];t.width=(s=n.DDSTools.GetDDSInfo(o)).width,t.height=s.height,r=(s.isRGB||s.isLuminance||s.mipmapCount>1)&&t.generateMipMaps,l._unpackFlipY(s.isCompressed),n.DDSTools.UploadDDSLevels(l,t,o,s,r,6,-1,a),s.isFourCC||1!==s.mipmapCount?u=s.mipmapCount-1:l.generateMipMapsForCubemap(t)}else t.width=(s=n.DDSTools.GetDDSInfo(e)).width,t.height=s.height,a&&(s.sphericalPolynomial=new o.i),r=(s.isRGB||s.isLuminance||s.mipmapCount>1)&&t.generateMipMaps,l._unpackFlipY(s.isCompressed),n.DDSTools.UploadDDSLevels(l,t,e,s,r,6),s.isFourCC||1!==s.mipmapCount?u=s.mipmapCount-1:l.generateMipMapsForCubemap(t,!1);l._setCubeMapTextureParams(t,r,u),t.isReady=!0,t.onLoadedObservable.notifyObservers(t),t.onLoadedObservable.clear(),i&&i({isDDS:!0,width:t.width,info:s,data:e,texture:t})}loadData(e,t,a){let o=n.DDSTools.GetDDSInfo(e),i=(o.isRGB||o.isLuminance||o.mipmapCount>1)&&t.generateMipMaps&&Math.max(o.width,o.height)>>o.mipmapCount-1==1;a(o.width,o.height,i,o.isFourCC,()=>{n.DDSTools.UploadDDSLevels(t.getEngine(),t,e,o,i,1)})}}},41316:function(e,t,a){var o=a(90481),n=a(88280),i=a(21381),s=a(53986),l=a(74913),r=a(14366),u=a(36020);l.a.prototype._partialLoadFile=function(e,t,a,o,n=null){this._loadFile(e,e=>{a[t]=e,a._internalCount++,6===a._internalCount&&o(a)},void 0,void 0,!0,(e,t)=>{n&&e&&n(e.status+" "+e.statusText,t)})},l.a.prototype._cascadeLoadFiles=function(e,t,a,o=null){let n=[];n._internalCount=0;for(let e=0;e<6;e++)this._partialLoadFile(a[e],e,n,t,o)},l.a.prototype._cascadeLoadImgs=function(e,t,a,o,n=null,i){let s=[];s._internalCount=0;for(let l=0;l<6;l++)this._partialLoadImg(o[l],l,s,e,t,a,n,i)},l.a.prototype._partialLoadImg=function(e,t,a,o,n,l,r=null,u){let p=(0,s.f)();(0,i.r6)(e,e=>{a[t]=e,a._internalCount++,o&&o.removePendingData(p),6===a._internalCount&&l&&l(n,a)},(e,t)=>{o&&o.removePendingData(p),r&&r(e,t)},o?o.offlineProvider:null,u),o&&o.addPendingData(p)},l.a.prototype.createCubeTextureBase=function(e,t,a,i,s=null,l=null,p,d=null,h=!1,c=0,m=0,C=null,f=null,D=null,_=!1,g=null){let b=C||new o.l(this,7);b.isCube=!0,b.url=e,b.generateMipMaps=!i,b._lodGenerationScale=c,b._lodGenerationOffset=m,b._useSRGBBuffer=!!_&&this._caps.supportSRGBBuffers&&(this.version>1||this.isWebGPU||!!i),b!==C&&(b.label=e.substring(0,60)),this._doNotHandleContextLost||(b._extension=d,b._files=a,b._buffer=g);let L=e;this._transformTextureUrl&&!C&&(e=this._transformTextureUrl(e));let T=d??(0,u.t)(e),w=(0,r.qr)(T),S=(e,t)=>{b.dispose(),l?l(e,t):e&&n.Y.Warn(e)},v=(o,l)=>{e===L?o&&S(o.status+" "+o.statusText,l):(n.Y.Warn(`Failed to load ${e}, falling back to the ${L}`),this.createCubeTextureBase(L,t,a,!!i,s,S,p,d,h,c,m,b,f,D,_,g))};if(w)w.then(o=>{let n=e=>{f&&f(b,e),o.loadCubeData(e,b,h,s,(e,t)=>{S(e,t)})};g?n(g):a&&6===a.length?o.supportCascades?this._cascadeLoadFiles(t,e=>n(e.map(e=>new Uint8Array(e))),a,S):S("Textures type does not support cascades."):this._loadFile(e,e=>n(new Uint8Array(e)),void 0,void 0,!0,v)});else{if(!a||0===a.length)throw Error("Cannot load cubemap because files were not defined, or the correct loader was not found.");this._cascadeLoadImgs(t,b,(e,t)=>{D&&D(e,t)},a,S)}return this._internalTexturesCache.push(b),b}}}]);