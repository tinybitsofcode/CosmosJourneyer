"use strict";(globalThis.webpackChunkcosmos_journeyer=globalThis.webpackChunkcosmos_journeyer||[]).push([["3492"],{46259:function(t,e,r){r.r(e),r.d(e,{_HDRTextureLoader:()=>a});var n=r(23784);class a{constructor(){this.supportCascades=!1}loadCubeData(){throw".hdr not supported in Cube."}loadData(t,e,r){let a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=(0,n.dK)(a),i=(0,n.ls)(a,o),u=o.width*o.height,h=new Float32Array(4*u);for(let t=0;t<u;t+=1)h[4*t]=i[3*t],h[4*t+1]=i[3*t+1],h[4*t+2]=i[3*t+2],h[4*t+3]=1;r(o.width,o.height,e.generateMipMaps,!1,()=>{let t=e.getEngine();e.type=1,e.format=5,e._gammaSpace=!1,t._uploadDataToTextureDirectly(e,h)})}}},91939:function(t,e,r){r.d(e,{Nn:()=>a,Q_:()=>o,kn:()=>i,zp:()=>n});let n=1/2.2,a=2.2,o=(1+Math.sqrt(5))/2,i=.001},68645:function(t,e,r){function n(t){return parseInt(t.toString().replace(/\W/g,""))}function a(t,e,r=1401298e-51){return Math.abs(t-e)<=r}function o(t,e,r,n=1401298e-51){return t<e-n||t>r+n}function i(t,e){return t===e?t:Math.random()*(e-t)+t}function u(t,e,r){return t+(e-t)*r}function h(t,e,r){let n=g(e-t,360);return n>180&&(n-=360),t+n*c(r)}function f(t,e,r){let n=0;return t!=e?c((r-t)/(e-t)):0}function l(t,e,r,n,a){let o=a*a,i=a*o;return t*(2*i-3*o+1)+r*(-2*i+3*o)+e*(i-2*o+a)+n*(i-o)}function s(t,e,r,n,a){let o=a*a;return(o-a)*6*t+(3*o-4*a+1)*e+(-o+a)*6*r+(3*o-2*a)*n}function c(t,e=0,r=1){return Math.min(r,Math.max(e,t))}function w(t){return t-2*Math.PI*Math.floor((t+Math.PI)/(2*Math.PI))}function d(t){let e=t.toString(16);return t<=15?("0"+e).toUpperCase():e.toUpperCase()}function p(t){if(Math.log2)return Math.floor(Math.log2(t));if(t<0)return NaN;if(0===t)return-1/0;let e=0;if(t<1){for(;t<1;)e++,t*=2;e=-e}else if(t>1)for(;t>1;)e++,t=Math.floor(t/2);return e}function g(t,e){return t-Math.floor(t/e)*e}function C(t,e,r){return(t-e)/(r-e)}function P(t,e,r){return t*(r-e)+e}function m(t,e){let r=g(e-t,360);return r>180&&(r-=360),r}function M(t,e){let r=g(t,2*e);return e-Math.abs(r-e)}function b(t,e,r){let n=c(r);return e*(n=-2*n*n*n+3*n*n)+t*(1-n)}function A(t,e,r){let n=0;return Math.abs(e-t)<=r?e:t+Math.sign(e-t)*r}function T(t,e,r){let n=m(t,e),a=0;return-r<n&&n<r?a=e:(e=t+n,a=A(t,e,r)),a}function F(t,e,r){return(t-e)/(r-e)}function R(t,e,r){return(r-e)*t+e}r.r(e),r.d(e,{Clamp:()=>c,DeltaAngle:()=>m,Denormalize:()=>P,ExtractAsInt:()=>n,Hermite:()=>l,Hermite1stDerivative:()=>s,HighestCommonFactor:()=>function t(e,r){let n=e%r;return 0===n?r:t(r,n)},ILog2:()=>p,InverseLerp:()=>f,Lerp:()=>u,LerpAngle:()=>h,MoveTowards:()=>A,MoveTowardsAngle:()=>T,Normalize:()=>C,NormalizeRadians:()=>w,OutsideRange:()=>o,PercentToRange:()=>R,PingPong:()=>M,RandomRange:()=>i,RangeToPercent:()=>F,Repeat:()=>g,SmoothStep:()=>b,ToHex:()=>d,WithinEpsilon:()=>a})},23784:function(t,e,r){r.d(e,{dK:()=>i,ls:()=>h,od:()=>u,sw:()=>l});var n=r(6638);function a(t,e,r,n,a,o){if(a>0){var i;a=(i=a-136)>1023?898846567431158e293*Math.pow(2,i-1023):i<-1074?5e-324*1*Math.pow(2,i+1074):+Math.pow(2,i),t[o+0]=e*a,t[o+1]=r*a,t[o+2]=n*a}else t[o+0]=0,t[o+1]=0,t[o+2]=0}function o(t,e){let r="",n="";for(let a=e;a<t.length-e&&"\n"!=(n=String.fromCharCode(t[a]));a++)r+=n;return r}function i(t){let e=0,r=0,n=o(t,0);if("#"!=n[0]||"?"!=n[1])throw"Bad HDR Format.";let a=!1,i=!1,u=0;do u+=n.length+1,"FORMAT=32-bit_rle_rgbe"==(n=o(t,u))?i=!0:0==n.length&&(a=!0);while(!a);if(!i)throw"HDR Bad header format, unsupported FORMAT";u+=n.length+1,n=o(t,u);let h=/^-Y (.*) \+X (.*)$/g.exec(n);if(!h||h.length<3)throw"HDR Bad header format, no size";if(r=parseInt(h[2]),e=parseInt(h[1]),r<8||r>32767)throw"HDR Bad header format, unsupported size";return{height:e,width:r,dataPosition:u+=n.length+1}}function u(t,e,r=!1){let a=new Uint8Array(t),o=i(a),h=f(a,o);return n.B.ConvertPanoramaToCubemap(h,o.width,o.height,e,r)}function h(t,e){return f(t,e)}function f(t,e){let r,n,o,i,u,h=e.height,f=e.width,l=e.dataPosition,s=0,c=0,w=0,d=new Uint8Array(new ArrayBuffer(4*f)),p=new Float32Array(new ArrayBuffer(e.width*e.height*12));for(;h>0;){if(r=t[l++],n=t[l++],o=t[l++],i=t[l++],2!=r||2!=n||128&o||e.width<8||e.width>32767)return function(t,e){let r,n,o,i=e.height,u=e.width,h=e.dataPosition,f=new Float32Array(new ArrayBuffer(e.width*e.height*12));for(;i>0;){for(o=0;o<e.width;o++)r=t[h++],n=t[h++],a(f,r,n,t[h++],t[h++],(e.height-i)*u*3+3*o);i--}return f}(t,e);if((o<<8|i)!=f)throw"HDR Bad header format, wrong scan line width";for(w=0,s=0;w<4;w++)for(c=(w+1)*f;s<c;)if(r=t[l++],n=t[l++],r>128){if(0==(u=r-128)||u>c-s)throw"HDR Bad Format, bad scanline data (run)";for(;u-- >0;)d[s++]=n}else{if(0==(u=r)||u>c-s)throw"HDR Bad Format, bad scanline data (non-run)";if(d[s++]=n,--u>0)for(let e=0;e<u;e++)d[s++]=t[l++]}for(w=0;w<f;w++)r=d[w],n=d[w+f],a(p,r,n,o=d[w+2*f],i=d[w+3*f],(e.height-h)*f*3+3*w);h--}return p}let l={RGBE_ReadHeader:i,GetCubeMapTextureData:u,RGBE_ReadPixels:h}},6638:function(t,e,r){r.d(e,{B:()=>a});var n=r(51971);class a{static ConvertPanoramaToCubemap(t,e,r,n,a=!1){if(!t)throw"ConvertPanoramaToCubemap: input cannot be null";if(t.length!=e*r*3)throw"ConvertPanoramaToCubemap: input size is wrong";let o=this.CreateCubemapTexture(n,this.FACE_FRONT,t,e,r,a),i=this.CreateCubemapTexture(n,this.FACE_BACK,t,e,r,a),u=this.CreateCubemapTexture(n,this.FACE_LEFT,t,e,r,a),h=this.CreateCubemapTexture(n,this.FACE_RIGHT,t,e,r,a);return{front:o,back:i,left:u,right:h,up:this.CreateCubemapTexture(n,this.FACE_UP,t,e,r,a),down:this.CreateCubemapTexture(n,this.FACE_DOWN,t,e,r,a),size:n,type:1,format:4,gammaSpace:!1}}static CreateCubemapTexture(t,e,r,n,a,o=!1){let i=new Float32Array(new ArrayBuffer(t*t*12)),u=o?Math.max(1,Math.round(n/4/t)):1,h=1/u,f=h*h,l=e[1].subtract(e[0]).scale(h/t),s=e[3].subtract(e[2]).scale(h/t),c=1/t,w=0;for(let o=0;o<t;o++)for(let d=0;d<u;d++){let d=e[0],p=e[2];for(let e=0;e<t;e++)for(let h=0;h<u;h++){let u=p.subtract(d).scale(w).add(d);u.normalize();let h=this.CalcProjectionSpherical(u,r,n,a);i[o*t*3+3*e+0]+=h.r*f,i[o*t*3+3*e+1]+=h.g*f,i[o*t*3+3*e+2]+=h.b*f,d=d.add(l),p=p.add(s)}w+=c*h}return i}static CalcProjectionSpherical(t,e,r,n){let a=Math.atan2(t.z,t.x),o=Math.acos(t.y);for(;a<-Math.PI;)a+=2*Math.PI;for(;a>Math.PI;)a-=2*Math.PI;let i=a/Math.PI,u=o/Math.PI,h=Math.round((i=.5*i+.5)*r);h<0?h=0:h>=r&&(h=r-1);let f=Math.round(u*n);f<0?f=0:f>=n&&(f=n-1);let l=n-f-1,s=e[l*r*3+3*h+0];return{r:s,g:e[l*r*3+3*h+1],b:e[l*r*3+3*h+2]}}}a.FACE_LEFT=[new n.P(-1,-1,-1),new n.P(1,-1,-1),new n.P(-1,1,-1),new n.P(1,1,-1)],a.FACE_RIGHT=[new n.P(1,-1,1),new n.P(-1,-1,1),new n.P(1,1,1),new n.P(-1,1,1)],a.FACE_FRONT=[new n.P(1,-1,-1),new n.P(1,-1,1),new n.P(1,1,-1),new n.P(1,1,1)],a.FACE_BACK=[new n.P(-1,-1,1),new n.P(-1,-1,-1),new n.P(-1,1,1),new n.P(-1,1,-1)],a.FACE_DOWN=[new n.P(1,1,-1),new n.P(1,1,1),new n.P(-1,1,-1),new n.P(-1,1,1)],a.FACE_UP=[new n.P(-1,-1,-1),new n.P(-1,-1,1),new n.P(1,-1,-1),new n.P(1,-1,1)]}}]);